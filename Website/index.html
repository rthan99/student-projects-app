<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Student Projects</title>
    <link rel="stylesheet" href="static/styles.css" />
  </head>
  <body>
    <h1>DEF Projects<span class="header-credits">built by Nathan Pottier 2025</span></h1>
    
    <div class="header-tabs">
      <button id="instructionsBtn" class="header-tab-btn" title="Instructions" onclick="openInstructions()">üìã Instructions</button>
    </div>
    
    <div class="header">
      <div class="header-content">
        <section class="controls">
          <div class="controls-top">
            <button id="randomProjects" class="random-btn">üé≤ Show me 4 random projects</button>
            <button id="createToggle" class="circle-btn" aria-label="Create a new project">
              <span class="icon">+</span>
            </button>
            <button id="filterToggle" class="filter-toggle-btn" aria-label="Toggle filters">
              <span class="icon">üîç</span>
              <span class="text">Filter</span>
            </button>
          </div>
          
          <div class="controls-filters" id="controlsFilters">
            <!-- Search and Quick Filters Row -->
            <div class="filter-row">
              <div class="search-container">
                <input id="search" placeholder="Search projects by title, student name, or description..." />
                <span class="search-icon">üîç</span>
              </div>
              <div class="quick-filters">
                <button class="filter-tag" data-filter="has-media" id="filterHasMedia">
                  <span class="filter-icon">üñºÔ∏è</span>
                  With Media
                </button>
                <button class="filter-tag" data-filter="no-media" id="filterNoMedia">
                  <span class="filter-icon">üö´</span>
                  No Media
                </button>
                <button class="filter-tag" data-filter="has-video" id="filterHasVideo">
                  <span class="filter-icon">üé•</span>
                  With Video
                </button>
                <button class="filter-tag" data-filter="no-video" id="filterNoVideo">
                  <span class="filter-icon">üö´</span>
                  No Video
                </button>
                <button class="filter-tag" data-filter="has-links" id="filterHasLinks">
                  <span class="filter-icon">üîó</span>
                  With Links
                </button>
              </div>
            </div>
            
            <!-- Detailed Filters Row -->
            <div class="filter-row">
              <select id="year" class="filter-select">
              <option value="">All Years</option>
            </select>
              
        <select id="curator" class="filter-select">
          <option value="">All Editors</option>
        </select>
        
        <select id="rating" class="filter-select">
          <option value="">All Ratings</option>
          <option value="5">5 Stars</option>
          <option value="4">4+ Stars</option>
          <option value="3">3+ Stars</option>
          <option value="2">2+ Stars</option>
          <option value="1">1+ Stars</option>
        </select>
              
              <select id="sortBy" class="filter-select">
              <option value="title_asc">Title (A-Z)</option>
              <option value="title_desc">Title (Z-A)</option>
              <option value="rating_desc">Rating (High to Low)</option>
              <option value="rating_asc">Rating (Low to High)</option>
              <option value="year_desc">Year (Newest First)</option>
              <option value="year_asc">Year (Oldest First)</option>
            </select>
            </div>
            
            <!-- Filter Actions and Results -->
            <div class="filter-row filter-actions">
              <div class="filter-results">
                <span id="filterResults">Loading projects...</span>
              </div>
              <div class="filter-buttons">
                <button id="clearFilters" class="btn btn-secondary btn-small">
                  <span class="btn-icon">üîÑ</span>
                  Clear All
                </button>
                <button id="applyFilters" class="btn btn-primary btn-small">
                  <span class="btn-icon">üîç</span>
                  Apply Filters
                </button>
              </div>
            </div>
            
            <!-- Active Filters Display -->
            <div class="active-filters" id="activeFilters" style="display: none;">
              <span class="active-filters-label">Active filters:</span>
              <div class="active-filters-list" id="activeFiltersList"></div>
            </div>
          </div>
        </section>

      </div>
    </div>

    <div class="main-content">
      <div id="projectGrid" class="card-grid"></div>
    </div>

    <!-- Admin Modal -->
    <div id="adminModal" class="admin-modal-overlay" style="display: none;">
      <div class="admin-modal">
        <div class="admin-modal-header">
          <h2>Admin Database</h2>
          <button class="admin-close-btn">√ó</button>
        </div>
        <div class="admin-modal-content">
          <div id="adminLogin" class="admin-login">
            <h3>Enter Admin PIN</h3>
            <input type="password" id="adminPin" placeholder="Enter PIN" maxlength="4" />
            <button id="adminLoginBtn">Access Database</button>
            <div id="adminError" class="admin-error" style="display: none;">Invalid PIN</div>
          </div>
          <div id="adminContent" class="admin-content" style="display: none;">
            <div class="admin-stats">
              <div class="stat-item">
                <span class="stat-number" id="totalProjects">0</span>
                <span class="stat-label">Total Projects</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" id="totalImages">0</span>
                <span class="stat-label">Images</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" id="totalVideos">0</span>
                <span class="stat-label">Videos</span>
              </div>
              <div class="stat-item">
                <span class="stat-number" id="ratedProjects">0</span>
                <span class="stat-label">Rated Projects</span>
              </div>
            </div>
            <div class="admin-table-container">
              <table id="adminTable" class="admin-table">
                <thead>
                  <tr>
                    <th>ID</th>
                    <th>Title</th>
                    <th>Student</th>
                    <th>Year</th>
                    <th>Rating</th>
                    <th>Interaction Type</th>
                    <th>Phenomena</th>
                    <th>Tags</th>
                    <th>Description</th>
                    <th>Media</th>
                    <th>Created</th>
                  </tr>
                </thead>
                <tbody id="adminTableBody">
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Create Project Modal -->
    <div id="createProjectModal" class="modal-overlay" style="display: none;">
      <div class="modal">
        <div class="modal-header">
          <h2>Create New Project</h2>
          <button class="modal-close-btn" onclick="closeCreateModal()">√ó</button>
        </div>
        <div class="modal-content">
          <form id="createProjectForm">
            
            <!-- Basic Information Section -->
            <div class="form-section">
              <h3 class="section-title">Basic Information</h3>
              
              <div class="form-group">
                <label for="new_title" class="form-label required">Project Title</label>
                <input id="new_title" type="text" placeholder="Enter project title..." class="form-input" required />
                <div class="form-hint">A clear, descriptive title for the project</div>
              </div>
              
              <div class="form-row">
                
                <div class="form-group">
                  <label for="new_year" class="form-label">Year</label>
                  <input id="new_year" type="number" placeholder="2025" class="form-input" min="2020" max="2030" />
                </div>
              </div>
              
              <div class="form-row">
                <div class="form-group">
                  <label for="new_curator" class="form-label">Editor</label>
                  <select id="new_curator" class="form-input">
                    <option value="">Select Editor</option>
                    <option value="Annemarie">Annemarie</option>
                    <option value="Esther">Esther</option>
                    <option value="Judith">Judith</option>
                    <option value="Jose">Jose</option>
                    <option value="Marije">Marije</option>
                    <option value="Rooske">Rooske</option>
                    <option value="Inka">Inka</option>
                    <option value="Mart">Mart</option>
                    <option value="Katja">Katja</option>
                    <option value="Nathan">Nathan</option>
                    <option value="Rolf">Rolf</option>
                    <option value="Other (add your name in the comment)">Other (add your name in the comment)</option>
                  </select>
                </div>
                
              </div>
              
              <div class="form-group">
                <label for="new_desc" class="form-label">Description</label>
                <textarea id="new_desc" placeholder="Describe your project, what it does, and how it works..." class="form-textarea" rows="4"></textarea>
              </div>
              
              <div class="form-group">
                <label for="new_tags" class="form-label">Tags</label>
                <input id="new_tags" type="text" placeholder="physics, mechanics, electronics" class="form-input" />
                <div class="form-hint">Separate tags with commas</div>
              </div>
            </div>

            <!-- Project Details Section -->
            <div class="form-section">
              <h3 class="section-title">Project Details</h3>
              
              
              <div class="form-group">
                <label class="form-label">Rating</label>
                <div class="rating-input">
                  <div class="star-rating" id="new_rating">
                    <span class="star" data-rating="1" title="1 Star">‚òÖ</span>
                    <span class="star" data-rating="2" title="2 Stars">‚òÖ</span>
                    <span class="star" data-rating="3" title="3 Stars">‚òÖ</span>
                    <span class="star" data-rating="4" title="4 Stars">‚òÖ</span>
                    <span class="star" data-rating="5" title="5 Stars">‚òÖ</span>
                  </div>
                  <span id="rating-display">0 stars</span>
                </div>
                <div class="form-hint">Optional: Rate this project</div>
              </div>
            </div>
            
            <!-- Links and Resources Section -->
            <div class="form-section">
              <h3 class="section-title">Links and Resources</h3>
              
              <div class="form-group">
                <label for="new_project_link" class="form-label">Project Link</label>
                <input id="new_project_link" type="url" placeholder="https://example.com/project" class="form-input" />
                <div class="form-hint">Link to the project website or demo</div>
              </div>
              
              
              <div class="form-group">
                <label for="new_video_url" class="form-label">Video URL</label>
                <input id="new_video_url" type="url" placeholder="https://youtube.com/watch?v=..." class="form-input" />
                <div class="form-hint">YouTube, Vimeo, or other video URL</div>
              </div>
            </div>
            
            <!-- Media Upload Section -->
            <div class="form-section">
              <h3 class="section-title">Media Files</h3>
              
              <div class="media-upload-grid">
                <div class="media-upload-item">
                  <div class="media-upload-area">
                    <div class="upload-icon">üì∑</div>
                    <div class="upload-text">
                      <strong>Cover Image</strong>
                      <span>Click to upload or drag & drop</span>
                    </div>
                    <input id="new_image" type="file" accept="image/*" class="file-input" />
                  </div>
                  <div class="file-info" id="image-info"></div>
                </div>
                
                <div class="media-upload-item">
                  <div class="media-upload-area">
                    <div class="upload-icon">üé•</div>
                    <div class="upload-text">
                      <strong>Video File</strong>
                      <span>Click to upload or drag & drop</span>
                    </div>
                    <input id="new_video" type="file" accept="video/*" class="file-input" />
                  </div>
                  <div class="file-info" id="video-info"></div>
                </div>
              </div>
            </div>
            
            <!-- Feedback Section -->
            <div class="form-section">
              <h3 class="section-title">Feedback</h3>
              
              <div class="form-group">
                <label for="new_feedback" class="form-label">Additional Feedback</label>
                <textarea id="new_feedback" placeholder="Additional feedback or notes about the project..." class="form-textarea" rows="3"></textarea>
              </div>
            </div>
            
            <!-- Form Actions -->
            <div class="form-actions">
              <button type="button" class="btn btn-secondary" onclick="closeCreateModal()">Cancel</button>
              <button type="submit" class="btn btn-primary btn-large" id="createBtn">
                <span class="btn-icon">‚ú®</span>
                Create Project
              </button>
            </div>
            
            <div class="form-status" id="create-status"></div>
          </form>
        </div>
      </div>
    </div>

    <!-- Project Detail Modal -->
    <div id="projectDetailModal" class="modal-overlay" style="display: none;">
      <div class="modal project-modal">
        <div class="modal-header">
          <h2 id="modalTitle">Project Details</h2>
          <div class="modal-actions">
            <button class="btn btn-secondary" id="editProjectBtn" onclick="toggleEditMode()">Edit</button>
            <button class="modal-close-btn" onclick="closeProjectModal()">√ó</button>
          </div>
        </div>
        <div class="modal-content">
          <!-- View Mode -->
          <div id="viewMode" class="project-view">
            <div class="project-layout-two-column">
              <!-- Left Column: Media & Info -->
              <div class="project-left-column">
                <!-- Media Section -->
                <div class="project-media-full">
                  <div id="projectMediaContainer"></div>
                </div>
                
                <!-- Info Section -->
                <div class="project-info">
                  <div class="info-section" id="descriptionSection">
                    <h3>Description</h3>
                    <p id="modalDescription"></p>
                  </div>
                  
                  <div class="info-section">
                    <h3>Project Information</h3>
                    <div class="info-grid">
                      <div class="info-item">
                        <label>Year</label>
                        <span id="modalYear"></span>
                      </div>
                      <div class="info-item">
                        <label>Editor</label>
                        <span id="modalCurator"></span>
                      </div>
                      <div class="info-item">
                        <label>Rating</label>
                        <div class="modal-rating-container">
                          <div id="modalRating" class="modal-rating-stars" data-project-id="">
                            <span class="star" data-rating="1">‚òÖ</span>
                            <span class="star" data-rating="2">‚òÖ</span>
                            <span class="star" data-rating="3">‚òÖ</span>
                            <span class="star" data-rating="4">‚òÖ</span>
                            <span class="star" data-rating="5">‚òÖ</span>
                          </div>
                          <button type="button" class="btn-clear-rating-modal" onclick="clearModalRating()" title="Clear rating">Clear</button>
                        </div>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-section" id="tagsSection">
                    <h3>Tags</h3>
                    <div id="modalTags" class="tags-display"></div>
                  </div>
                  
                  <div class="info-section" id="linksSection">
                    <h3>Links</h3>
                    <div class="links-grid">
                      <div id="projectLinkItem" class="link-item" style="display: none;">
                        <a id="modalProjectLink" href="#" target="_blank" class="link-icon">
                          <span class="icon">üåê</span>
                          <span class="label">Project Link</span>
                        </a>
                      </div>
                      <div id="githubLinkItem" class="link-item" style="display: none;">
                        <a id="modalGithubRepo" href="#" target="_blank" class="btn btn-secondary">GitHub</a>
                      </div>
                      <div id="documentationLinkItem" class="link-item" style="display: none;">
                        <a id="modalDocumentation" href="#" target="_blank" class="btn btn-secondary">Documentation</a>
                      </div>
                      <div id="videoLinkItem" class="link-item" style="display: none;">
                        <a id="modalVideoUrl" href="#" target="_blank" class="btn btn-secondary">Video</a>
                      </div>
                    </div>
                  </div>
                  
                  <div class="info-section" id="feedbackSection">
                    <h3>Feedback</h3>
                    <p id="modalFeedback"></p>
                  </div>
                </div>
              </div>
              
              <!-- Right Column: Comments -->
              <div class="project-right-column">
                <div class="comments-section-full" id="commentsSection">
                  <h3>Comments</h3>
                  <div class="comments-container">
                    <!-- Add Comment Form -->
                    <div class="add-comment-form">
                      <div class="comment-form-header">
                        <h4>Add a Comment</h4>
                      </div>
                      <form id="addCommentForm" class="comment-form">
                        <div class="comment-form-row">
                          <div class="form-group">
                            <label for="commentCategory" class="form-label">Category</label>
                            <select id="commentCategory" class="form-input" required>
                              <option value="">Select Category</option>
                              <option value="1">Exhibition type</option>
                              <option value="2">Opportunities</option>
                              <option value="3">Challenges</option>
                              <option value="4">Visitor experience</option>
                              <option value="5">Open Comment</option>
                            </select>
                            <div id="categoryDescription" class="category-description"></div>
                          </div>
                          <div class="form-group">
                            <label for="commentAuthor" class="form-label">Your Name</label>
                            <select id="commentAuthor" class="form-input" required>
                              <option value="">Select Editor</option>
                              <option value="Annemarie">Annemarie</option>
                              <option value="Esther">Esther</option>
                              <option value="Judith">Judith</option>
                              <option value="Jose">Jose</option>
                              <option value="Marije">Marije</option>
                              <option value="Rooske">Rooske</option>
                              <option value="Inka">Inka</option>
                              <option value="Mart">Mart</option>
                              <option value="Katja">Katja</option>
                              <option value="Nathan">Nathan</option>
                              <option value="Rolf">Rolf</option>
                              <option value="Other (add your name in the comment)">Other (add your name in the comment)</option>
                            </select>
                          </div>
                        </div>
                        <div class="form-group">
                          <label for="commentText" class="form-label">Comment</label>
                          <textarea id="commentText" rows="3" placeholder="Write your comment here..." class="form-textarea" required></textarea>
                        </div>
                        <div class="form-actions">
                          <button type="submit" class="btn btn-primary">
                            <span class="btn-icon">üí¨</span>
                            Post Comment
                          </button>
                        </div>
                        <div class="form-status" id="comment-status"></div>
                      </form>
                    </div>
                    
                    <!-- Comments Display -->
                    <div class="comments-list" id="commentsList">
                      <div class="comments-loading" id="commentsLoading">
                        <div class="loading-spinner"></div>
                        <span>Loading comments...</span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Edit Mode -->
          <div id="editMode" class="project-edit" style="display: none;">
            <form id="editProjectForm" class="edit-form">
              <div class="form-sections">
                <!-- Basic Info Section -->
                <div class="form-section">
                  <h3>Basic Information</h3>
                  <div class="form-grid">
                    <div class="form-group">
                      <label for="edit_title" class="form-label">Project Title *</label>
                      <input id="edit_title" type="text" required class="form-input" />
                    </div>
                    <div class="form-group">
                      <label for="edit_year" class="form-label">Year</label>
                      <input id="edit_year" type="number" min="2000" max="2030" class="form-input" />
                    </div>
                    <div class="form-group">
                      <label for="edit_curator" class="form-label">Editor</label>
                      <select id="edit_curator" class="form-input">
                        <option value="">Select Editor</option>
                        <option value="Annemarie">Annemarie</option>
                        <option value="Esther">Esther</option>
                        <option value="Judith">Judith</option>
                        <option value="Jose">Jose</option>
                        <option value="Marije">Marije</option>
                        <option value="Rooske">Rooske</option>
                        <option value="Inka">Inka</option>
                        <option value="Mart">Mart</option>
                        <option value="Katja">Katja</option>
                        <option value="Nathan">Nathan</option>
                        <option value="Rolf">Rolf</option>
                        <option value="Other (add your name in the comment)">Other (add your name in the comment)</option>
                        <option value="">--- Clear Editor Name ---</option>
                      </select>
                    </div>
                  </div>
                </div>
                
                <!-- Details Section -->
                <div class="form-section">
                  <h3>Project Details</h3>
                  <div class="form-grid">
                    <div class="form-group">
                      <label for="edit_rating" class="form-label">Rating</label>
                      <div style="display: flex; align-items: center; gap: 8px;">
                        <div class="star-rating" id="edit_rating">
                          <span class="star" data-rating="1">‚òÖ</span>
                          <span class="star" data-rating="2">‚òÖ</span>
                          <span class="star" data-rating="3">‚òÖ</span>
                          <span class="star" data-rating="4">‚òÖ</span>
                          <span class="star" data-rating="5">‚òÖ</span>
                        </div>
                        <button type="button" class="btn-clear-rating" onclick="clearEditRating()" title="Clear rating">Clear</button>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Description and Tags -->
                <div class="form-section">
                  <h3>Description & Tags</h3>
                  <div class="form-group">
                    <label for="edit_description" class="form-label">Description</label>
                    <textarea id="edit_description" rows="4" placeholder="Describe the project..." class="form-input"></textarea>
                  </div>
                  <div class="form-group">
                    <label for="edit_tags" class="form-label">Tags</label>
                    <input id="edit_tags" type="text" placeholder="JavaScript, React, Node.js (comma-separated)" class="form-input" />
                  </div>
                </div>
                
                <!-- Links Section -->
                <div class="form-section">
                  <h3>Links</h3>
                  <div class="form-grid">
                    <div class="form-group">
                      <label for="edit_project_link" class="form-label">Project Link</label>
                      <input id="edit_project_link" type="url" placeholder="https://myproject.com" class="form-input" />
                    </div>
                    <div class="form-group">
                      <label for="edit_video_url" class="form-label">Video URL</label>
                      <input id="edit_video_url" type="url" placeholder="https://youtube.com/watch?v=..." class="form-input" />
                    </div>
                  </div>
                </div>
                
                <!-- Media Section -->
                <div class="form-section">
                  <h3>Media Files</h3>
                  
                  <!-- Current Media Display -->
                  <div id="currentMediaSection" class="current-media">
                    <div id="currentImageSection" class="media-item" style="display: none;">
                      <h4>Current Image</h4>
                      <div class="current-media-preview">
                        <img id="currentImagePreview" src="" alt="Current image" style="max-width: 200px; max-height: 150px; object-fit: cover; border-radius: 8px;">
                        <button type="button" class="btn btn-danger btn-small" onclick="deleteCurrentImage()">Delete Image</button>
                      </div>
                    </div>
                    
                    <div id="currentVideoSection" class="media-item" style="display: none;">
                      <h4>Current Video</h4>
                      <div class="current-media-preview">
                        <video id="currentVideoPreview" src="" controls style="max-width: 200px; max-height: 150px; border-radius: 8px;"></video>
                        <button type="button" class="btn btn-danger btn-small" onclick="deleteCurrentVideo()">Delete Video</button>
                      </div>
                    </div>
                  </div>
                  
                  <!-- New Media Upload -->
                  <div class="media-upload-section">
                    <div class="form-grid">
                      <div class="form-group">
                        <label class="form-label">Upload New Images (Multiple)</label>
                        <div class="media-upload-area" id="imageUploadArea">
                          <div class="upload-icon">üñºÔ∏è</div>
                          <div class="upload-text">
                            <strong>Select Image Files</strong>
                            <span>Click to upload or drag & drop multiple images</span>
                          </div>
                          <input id="edit_new_image" type="file" accept="image/*" class="file-input" multiple />
                        </div>
                        <div class="file-info" id="edit-image-info"></div>
                      </div>
                      
                      <div class="form-group">
                        <label class="form-label">Upload New Video</label>
                        <div class="media-upload-area">
                          <div class="upload-icon">üé•</div>
                          <div class="upload-text">
                            <strong>New Video File</strong>
                            <span>Click to upload or drag & drop</span>
                          </div>
                          <input id="edit_new_video" type="file" accept="video/*" class="file-input" />
                        </div>
                        <div class="file-info" id="edit-video-info"></div>
                      </div>
                    </div>
                  </div>
                </div>
                
                <!-- Feedback Section -->
                <div class="form-section">
                  <h3>Feedback</h3>
                  <div class="form-group">
                    <label for="edit_feedback" class="form-label">Feedback</label>
                    <textarea id="edit_feedback" rows="3" placeholder="Additional feedback or notes..." class="form-input"></textarea>
                  </div>
                </div>
              </div>
              
              <div class="form-actions">
                <button type="button" class="btn btn-danger" onclick="deleteCurrentProject()" style="margin-right: auto;">
                  <span class="btn-icon">üóëÔ∏è</span>
                  Delete Project
                </button>
                <button type="button" class="btn btn-secondary" onclick="cancelEdit()">Cancel</button>
                <button type="submit" class="btn btn-primary btn-large" id="saveBtn">
                  <span class="btn-icon">üíæ</span>
                  Save Changes
                </button>
              </div>
              <div class="form-status" id="edit-status"></div>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Supabase JavaScript SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- Configuration and Environment -->
    <script src="env.js"></script>
    <script src="config.js"></script>
    
    <!-- Application Scripts -->
    <script src="static/supabase-client.js"></script>
    <script src="static/form-generator.js"></script>
    <script src="static/gallery-media-client.js"></script>
    <script src="static/main-standalone.js"></script>
  </body>
</html>


